port: 7890
socks-port: 7891
mixed-port: 1080
redir-port: 9797
tproxy-port: 9898
external-controller: 127.0.0.1:9090
external-ui: /data/adb/box/clash/dashboard

ipv6: false
allow-lan: true
tcp-concurrent: true
unified-delay: true
keep-alive-interval: 1800  # å‡å°‘ç§»åŠ¨ç«¯è®¾å¤‡è€—ç”µ

mode: rule
log-level: info
global-client-fingerprint: chrome
geodata-loader: standard
find-process-mode: strict
bind-address: '*'

# é…ç½®ç»„-é«˜çº§
dns:
  enable: true
  prefer-h3: true
  listen: 0.0.0.0:1053
  ipv6: false
  ipv6-timeout: 300
  cache-algorithm: arc
  use-hosts: true

  enhanced-mode: redir-host

  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29

  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

  fallback: # å›½å¤– DNS æœåŠ¡å™¨
    - tcp://1.1.1.1
    - tls://1.1.1.1:853
    - https://1.1.1.1/dns-query

  nameserver-policy:
    '+.pub.3gppnetwork.org':
      - 61.139.2.69
      - 218.6.200.139
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.ai.com'
      - '+.algolia.net'
      - '+.anthropic.com'
      - '+.argotunnel.com'
      - '+.arkoselabs.com'
      - '+.auth0.com'
      - '+.azure.com'
      - '+.azureedge.net'
      - '+.bing.com'
      - '+.bingapis.com'
      - '+.bugsnag.com'
      - '+.chatgpt.com'
      - '+.claude.ai'
      - '+.cloudflare.net'
      - '+.cloudflareinsights.com'
      - '+.cohere.ai'
      - '+.docker.com'
      - '+.docker.io'
      - '+.facebook.com'
      - '+.github.com'
      - '+.githubusercontent.com'
      - '+.google'
      - '+.google.com'
      - '+.google.dev'
      - '+.googleapis.cn'
      - '+.googlevideo.com'
      - '+.identrust.com'
      - '+.instagram.com'
      - '+.intercom.io'
      - '+.live.com'
      - '+.livekit.cloud'
      - '+.meta.ai'
      - '+.microsoft.com'
      - '+.microsoftapp.net'
      - '+.minecraft.net'
      - '+.msn.com'
      - '+.openai.com'
      - '+.poe.com'
      - '+.segment.com'
      - '+.segment.io'
      - '+.sentry.io'
      - '+.synn.cc'
      - '+.stripe.com'
      - '+.t.me'
      - '+.tailscale.com'
      - '+.tailscale.io'
      - '+.twitter.com'
      - '+.usefathom.com'
      - '+.v2ex.com'
      - '+.windows.net'
      - '+.wootric.com'
      - '+.x.com'
      - '+.youtube.com'

# æ¨¡å¼é…ç½®
tun: # tunæ¨¡å¼
  enable: false
  device: mihomo
  stack: system # gvisor / lwip / system
  dns-hijack:
    - any:53  # éœ€è¦åŠ«æŒçš„ DNS
    - tcp://any:53
  auto-route: true # é…ç½®è·¯ç”±è¡¨
  auto-detect-interface: true  # è‡ªåŠ¨è¯†åˆ«å‡ºå£ç½‘å¡
  strict-route: false # å°†æ‰€æœ‰è¿æ¥è·¯ç”±åˆ° tun æ¥é˜²æ­¢æ³„æ¼ï¼Œä½†ä½ çš„è®¾å¤‡å°†æ— æ³•å…¶ä»–è®¾å¤‡è¢«è®¿é—® çƒ­ç‚¹å°†æ— æ³•å…±äº«ç½‘ç»œ

sniffer:
  enable: true
  force-dns-mapping: false
  parse-pure-ip: true
  override-destination: false

  # TLS å’Œ QUIC é»˜è®¤å¦‚æœä¸é…ç½® ports é»˜è®¤å—…æ¢ 443
  sniff:
    TLS:
      ports: [ 443, 8443 ]
    QUIC:
      ports: [ 443 ]
    HTTP:
      ports: [ 80, 8080-8880 ]
      override-destination: true # å¯è¦†ç›– sniffer.override-destination

  force-domain:
    - +.v2ex.com

  # # ç™½åå•,è·³è¿‡å—…æ¢ç»“æœ
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"
    - "+.pub.3gppnetwork.org"

profile:
  store-selected: true
  # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©ï¼Œä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-fake-ip: true
  # å‚¨å­˜ fake-ip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€

# é”šç‚¹ - èŠ‚ç‚¹è®¢é˜…çš„å‚æ•° [æ¯24å°æ—¶æ›´æ–°ä¸€æ¬¡è®¢é˜…èŠ‚ç‚¹ï¼Œæ¯ 60 ç§’ä¸€æ¬¡å¥åº·æ£€æŸ¥]
NodeParam: &NodeParam { type: http, interval: 86400, health-check: { enable: true, url: 'https://cp.cloudflare.com', interval: 18000 } }

# é”šç‚¹ - èŠ‚ç‚¹è®¢é˜…
proxy-providers:
  proxy:
    url: ""
    <<: *NodeParam
    path: './proxy_providers/proxy.yaml'

# é”šç‚¹ - èŠ‚ç‚¹ç­›é€‰ç»„
HK_Filter: &HK_Filter '^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹)).*$'
JP_Filter: &JP_Filter '^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|Japan)\b)))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹)).*$'
KR_Filter: &KR_Filter '^(?=.*((?i)ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|é¦–å°”|(\b(KR|Korea)\b)))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹)).*$'
SG_Filter: &SG_Filter '^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|Singapore)\b)))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹)).*$'
US_Filter: &US_Filter '^(?=.*((?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\b(US|United States)\b)))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹)).*$'
UK_Filter: &UK_Filter '^(?=.*((?i)ğŸ‡¬ğŸ‡§|è‹±å›½|ä¼¦æ•¦|(\b(UK|United Kingdom)\b)))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹)).*$'
FR_Filter: &FR_Filter '^(?=.*((?i)ğŸ‡«ğŸ‡·|æ³•å›½|(\b(FR|France)\b)))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹)).*$'
DE_Filter: &DE_Filter '^(?=.*((?i)ğŸ‡©ğŸ‡ª|å¾·å›½|(\b(DE|Germany)\b)))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹)).*$'
TW_Filter: &TW_Filter '^(?=.*((?i)ğŸ‡¹ğŸ‡¼|å°æ¹¾|(\b(TW|Taiwan)\b)))^(?!.*(ç½‘ç«™|åœ°å€|å‰©ä½™|è¿‡æœŸ|æ—¶é—´|æœ‰æ•ˆ|ç½‘å€|ç¦æ­¢|é‚®ç®±|å‘å¸ƒ|å®¢æœ|è®¢é˜…|èŠ‚ç‚¹)).*$'
Other_Filter: &Other_Filter '^(?!.*(ğŸ‡­ğŸ‡°|HK|hk|é¦™æ¸¯|æ¸¯|HongKong|ğŸ‡¹ğŸ‡¼|TW|tw|å°æ¹¾|è‡ºç£|å°|Taiwan|ğŸ‡¯ğŸ‡µ|JP|jp|æ—¥æœ¬|æ—¥|Japan|ğŸ‡¸ğŸ‡¬|SG|sg|æ–°åŠ å¡|ç‹®|Singapore|ğŸ‡ºğŸ‡¸|US|us|ç¾å›½|ç¾|United States|ğŸ‡©ğŸ‡ª|DE|de|å¾·å›½|å¾·|Germany|ğŸ‡¬ğŸ‡§|GB|gb|è‹±å›½|è‹±|United Kingdom|ğŸ‡°ğŸ‡·|KR|kr|éŸ©å›½|éŸ©|South Korea|ğŸ‡«ğŸ‡·|FR|fr|æ³•å›½|æ³•|France)).*$'

# ç­–ç•¥ç»„å‚æ•°é”šç‚¹
# é”šç‚¹ - æ‰‹åŠ¨é€‰æ‹©å‚æ•°
SELECT: &SELECT { type: select, url: 'https://connectivitycheck.platform.hicloud.com/generate_204', disable-udp: false, hidden: false, include-all: true }
# é”šç‚¹ - URLæµ‹è¯•å‚æ•°
URL-TEST: &URL-TEST { type: url-test, url: 'https://connectivitycheck.platform.hicloud.com/generate_204', interval: 300, tolerance: 100, timeout: 5, exclude: [ 'CN', 'HK', 'TW', 'MO', 'SG', 'JP', 'KR', 'US', 'GB', 'FR', 'DE' ] }
# é”šç‚¹ - æ•…éšœå›é€€å‚æ•°
FALLBACK: &FALLBACK { type: fallback, url: 'https://connectivitycheck.platform.hicloud.com/generate_204', interval: 200 ,include-all: true }

# ç­–ç•¥ç»„
proxies:
  - name: DNSåŠ«æŒ
    type: dns

# ç­–ç•¥ç»„
proxy-groups:
  - { name: ğŸŒ å…¨çƒåŠ é€Ÿ, type: select, proxies: [ ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, ğŸ‡©ğŸ‡ª å¾·å›½èŠ‚ç‚¹, â™»ï¸ å‰©ä½™èŠ‚ç‚¹, DIRECT ] }
  - { name: ğŸ è‹¹æœæœåŠ¡, type: select, proxies: [ DIRECT, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, ğŸ‡©ğŸ‡ª å¾·å›½èŠ‚ç‚¹, â™»ï¸ å‰©ä½™èŠ‚ç‚¹ ] }
  - { name: â“‚ï¸ å¾®è½¯æœåŠ¡, type: select, proxies: [ DIRECT, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, ğŸ‡©ğŸ‡ª å¾·å›½èŠ‚ç‚¹, â™»ï¸ å‰©ä½™èŠ‚ç‚¹ ] }
  - { name: ğŸ” è°·æ­ŒæœåŠ¡, type: select, proxies: [ ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, ğŸ‡©ğŸ‡ª å¾·å›½èŠ‚ç‚¹, â™»ï¸ å‰©ä½™èŠ‚ç‚¹ ] }
  - { name: ğŸ¦ æ¨ç‰¹æœåŠ¡, type: select, proxies: [ ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, ğŸ‡©ğŸ‡ª å¾·å›½èŠ‚ç‚¹, â™»ï¸ å‰©ä½™èŠ‚ç‚¹, DIRECT ] }
  - { name: âœˆï¸ ç”µæŠ¥ä¿¡æ¯, type: select, proxies: [ ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, ğŸ‡©ğŸ‡ª å¾·å›½èŠ‚ç‚¹, â™»ï¸ å‰©ä½™èŠ‚ç‚¹ ] }
  - { name: ğŸ¤– äººå·¥æ™ºèƒ½, type: select, proxies: [ ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, ğŸ‡©ğŸ‡ª å¾·å›½èŠ‚ç‚¹, â™»ï¸ å‰©ä½™èŠ‚ç‚¹, DIRECT ] }
  - { name: ğŸ¿ å›½é™…åª’ä½“, type: select, proxies: [ ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, ğŸ‡©ğŸ‡ª å¾·å›½èŠ‚ç‚¹, â™»ï¸ å‰©ä½™èŠ‚ç‚¹, DIRECT ] }
  - { name: ğŸ® æ¸¸æˆå¹³å°, type: select, proxies: [ ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, ğŸ‡©ğŸ‡ª å¾·å›½èŠ‚ç‚¹, â™»ï¸ å‰©ä½™èŠ‚ç‚¹, DIRECT ] }
  - { name: ğŸ å…œåº•åˆ†æµ, type: select, proxies: [ ğŸŒ å…¨çƒåŠ é€Ÿ ,DIRECT ] }
  - { name: ğŸš« å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [ REJECT, DIRECT ] }

  - { name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, <<: *FALLBACK, filter: *HK_Filter }
  - { name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, <<: *FALLBACK, filter: *TW_Filter }
  - { name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹, <<: *FALLBACK, filter: *US_Filter }
  - { name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, <<: *FALLBACK, filter: *JP_Filter }
  - { name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, <<: *FALLBACK, filter: *KR_Filter }
  - { name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, <<: *FALLBACK, filter: *SG_Filter }
  - { name: ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, <<: *FALLBACK, filter: *UK_Filter }
  - { name: ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, <<: *FALLBACK, filter: *FR_Filter }
  - { name: ğŸ‡©ğŸ‡ª å¾·å›½èŠ‚ç‚¹, <<: *FALLBACK, filter: *DE_Filter }
  - { name: â™»ï¸ å‰©ä½™èŠ‚ç‚¹, <<: *FALLBACK, filter: *Other_Filter }

rule-anchor:
  # é”šç‚¹ - è§„åˆ™å‚æ•° [æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡è®¢é˜…è§„åˆ™ï¼Œæ›´æ–°è§„åˆ™æ—¶ä½¿ç”¨ç›´è¿ç­–ç•¥]
  RuleSet_File: &RuleSet_File { type: file, behavior: classical, format: yaml }
  RuleSet_Classical: &RuleSet_Classical { type: http, behavior: classical, interval: 43200, format: yaml }
  RuleSet_Domain: &RuleSet_Domain { type: http, behavior: domain, interval: 43200, format: yaml }
  RuleSet_IPCidr: &RuleSet_IPCidr { type: http, behavior: ipcidr, interval: 43200, format: yaml }

# è®¢é˜…è§„åˆ™
rule-providers:
  # æœ¬åœ°-å¼ºåˆ¶ç›´è¿è§„åˆ™
  ForcedDirect:
    <<: *RuleSet_File
    path: ./rule_set/å¼ºåˆ¶ç›´è¿-åŸŸå.yaml
  # æœ¬åœ°-å¼ºåˆ¶ä»£ç†è§„åˆ™
  ForcedProxy:
    <<: *RuleSet_File
    path: ./rule_set/å¼ºåˆ¶ä»£ç†-åŸŸå.yaml

  # ç›´è¿è§„åˆ™
  Direct:
    <<: *RuleSet_Domain
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Direct/Direct.yaml"
    path: ./rule_set/Direct.yaml

  # å±€åŸŸç½‘è§„åˆ™
  Lan:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Lan/Lan.yaml"
    path: ./rule_set/Lan.yaml

  # ä¸‹è½½è§„åˆ™
  Download:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Download/Download.yaml"
    path: ./rule_set/Download.yaml

  # å¹¿å‘Šæ‹¦æˆªè§„åˆ™
  Ad:
    <<: *RuleSet_Domain
    url: "https://anti-ad.net/clash.yaml"
    path: ./rule_set/anti-ad-clash.yaml

  # OpenAI è§„åˆ™
  OpenAI:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml"
    path: ./rule_set/OpenAI.yaml

  # Claude AI è§„åˆ™
  Claude:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Claude/Claude.yaml"
    path: ./rule_set/Claude.yaml

  # å…¨çƒåª’ä½“è§„åˆ™
  GlobalMedia:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GlobalMedia/GlobalMedia_Classical.yaml"
    path: ./rule_set/GlobalMedia.yaml

  # Apple æœåŠ¡è§„åˆ™
  Apple:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple_Classical.yaml"
    path: ./rule_set/Apple.yaml

  # å¾®è½¯æœåŠ¡è§„åˆ™
  Microsoft:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml"
    path: ./rule_set/Microsoft.yaml
  # GitHub è§„åˆ™
  Github:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GitHub/GitHub.yaml"
    path: ./rule_set/Github.yaml

  # Google æœåŠ¡è§„åˆ™
  GoogleFCM:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GoogleFCM/GoogleFCM.yaml"
    path: ./rule_set/GoogleFCM.yaml

  Google:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml"
    path: ./rule_set/Google.yaml

  # Telegram è§„åˆ™
  Telegram:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml"
    path: ./rule_set/Telegram.yaml

  # Twitter è§„åˆ™
  Twitter:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Twitter/Twitter.yaml"
    path: ./rule_set/Twitter.yaml

  # æ¸¸æˆè§„åˆ™
  Game:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Game/Game.yaml"
    path: ./rule_set/Game.yaml

  # ä¸­å›½è§„åˆ™
  ChinaMax:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax.yaml"
    path: ./rule_set/ChinaMax.yaml

  # ä¸­å›½ IP è§„åˆ™
  ChinaMax_IP:
    <<: *RuleSet_IPCidr
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax_IP.yaml"
    path: ./rule_set/ChinaIP.yaml

  # ä»£ç†è§„åˆ™ï¼ˆç²¾ç®€ç‰ˆï¼‰
  ProxyLite:
    <<: *RuleSet_Classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ProxyLite/ProxyLite.yaml"
    path: ./rule_set/ProxyLite.yaml

rules:
  # ä¼˜å…ˆå¤„ç†çš„è§„åˆ™
  - DST-PORT,53,DNSåŠ«æŒ
  - AND,((NETWORK,UDP),(OR,((DST-PORT,500),(DST-PORT,4500)))),DIRECT
  # å¼ºåˆ¶è§„åˆ™ï¼ˆç”¨æˆ·è‡ªå®šä¹‰ï¼‰
  - RULE-SET,ForcedDirect,DIRECT
  - RULE-SET,ForcedProxy,ğŸŒ å…¨çƒåŠ é€Ÿ
  # ç›´è¿è§„åˆ™
  - RULE-SET,Download,DIRECT
  - RULE-SET,Direct,DIRECT
  - RULE-SET,Lan,DIRECT
  # å¹¿å‘Šæ‹¦æˆªè§„åˆ™
  - RULE-SET,Ad,ğŸš« å¹¿å‘Šæ‹¦æˆª
  # ç‰¹å®šåº”ç”¨å’ŒæœåŠ¡
  - RULE-SET,GoogleFCM,DIRECT
  - RULE-SET,OpenAI,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Claude,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Twitter,ğŸ¦ æ¨ç‰¹æœåŠ¡
  - RULE-SET,Telegram,âœˆï¸ ç”µæŠ¥ä¿¡æ¯
  - RULE-SET,Github,ğŸŒ å…¨çƒåŠ é€Ÿ
  - RULE-SET,Apple,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,Microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,Google,ğŸ” è°·æ­ŒæœåŠ¡
  # åª’ä½“å’Œæ¸¸æˆ
  - RULE-SET,GlobalMedia,ğŸ¿ å›½é™…åª’ä½“
  - RULE-SET,Game,ğŸ® æ¸¸æˆå¹³å°
  # ä»£ç†è§„åˆ™
  - RULE-SET,ProxyLite,ğŸŒ å…¨çƒåŠ é€Ÿ
  # ä¸­å›½å¤§é™†è§„åˆ™
  - RULE-SET,ChinaMax,DIRECT
  - RULE-SET,ChinaMax_IP,DIRECT,no-resolve
  # å…œåº•è§„åˆ™
  - MATCH,ğŸ å…œåº•åˆ†æµ